# 从零开始构建LevelDB - 将数据持久化

前面的章节中我们实现了一个最简单的内存数据库，本章节我们要实现数据库中ACID中的D(Durability, 持久性)，也是采用最简单的方式，将内存中的
数据同步刷到磁盘上做持久化。这里就回答上一章节中关于持久化的问题。


# Diff
- 为DB新增一个文件句柄，用于持久化数据，为了存取方便，这里直接使用Json作为底层数据结构
- Put时先写文件，当文件写成功之后在更新内存
- 初始化数据库时，尝试加载本地文件，还原数据

# 问题
- 每次写入都要全量刷一次数据，效率太低，怎么优化？
- 内存是一个稀缺资源，如果用户写入的数据过多，内存会被打爆，怎么解决呢？